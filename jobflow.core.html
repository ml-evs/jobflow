<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="jobflow.managers" href="jobflow.managers.html" /><link rel="prev" title="jobflow" href="jobflow.html" />

    <meta name="generator" content="sphinx-3.5.3, furo 2021.03.20.beta30"/>
        <title>jobflow.core - jobflow</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=978e1795dfe158b585dda6a8417f6411828bf3ed">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --admonition-font-size: 92%;
  --admonition-title-font-size: 92%;
  --font-stack: Lato,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  --font-size--small: 92%;
  --font-size--small--2: 87.5%;
  --font-size--small--3: 87.5%;
  --font-size--small--4: 87.5%;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">jobflow</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">jobflow</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install jobflow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/1-quickstart.html">Five-minute quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/2-introduction.html">Introduction to jobflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/3-defining-jobs.html">Defining jobs in jobflow</a></li>
</ul>
</li>
</ul>
<p><span class="caption-text">Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to jobflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/hackingmaterials/jobflow">jobflow on GitHub</a></li>
</ul>
<p><span class="caption-text">Function Reference</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="jobflow.html">API reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">jobflow.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobflow.managers.html">jobflow.managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="jobflow.utils.html">jobflow.utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="jobflow-core">
<h1>jobflow.core<a class="headerlink" href="#jobflow-core" title="Permalink to this headline">¶</a></h1>
<section id="module-jobflow.core.flow">
<span id="jobflow-core-flow"></span><h2>jobflow.core.flow<a class="headerlink" href="#module-jobflow.core.flow" title="Permalink to this headline">¶</a></h2>
<p>Define base Flow object.</p>
<dl class="py class">
<dt id="jobflow.core.flow.JobOrder">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.flow.</span></code><code class="sig-name descname"><span class="pre">JobOrder</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#JobOrder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.JobOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="jobflow.utils.html#jobflow.utils.enum.ValueEnum" title="jobflow.utils.enum.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.utils.enum.ValueEnum</span></code></a></p>
<p>Options to control the order of job execution.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AUTO</span></code>: Automatically determine the job order based on input and output
references.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LINEAR</span></code>: Run the jobs in the order they appear in the jobs array.</p></li>
</ul>
<dl class="py attribute">
<dt id="jobflow.core.flow.JobOrder.AUTO">
<code class="sig-name descname"><span class="pre">AUTO</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'auto'</span></em><a class="headerlink" href="#jobflow.core.flow.JobOrder.AUTO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.flow.JobOrder.LINEAR">
<code class="sig-name descname"><span class="pre">LINEAR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'linear'</span></em><a class="headerlink" href="#jobflow.core.flow.JobOrder.LINEAR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.flow.Flow">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.flow.</span></code><code class="sig-name descname"><span class="pre">Flow</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">jobs</span></em>, <em class="sig-param"><span class="pre">output=None</span></em>, <em class="sig-param"><span class="pre">name='Flow'</span></em>, <em class="sig-param"><span class="pre">order=&lt;JobOrder.AUTO:</span> <span class="pre">'auto'&gt;</span></em>, <em class="sig-param"><span class="pre">uuid=None</span></em>, <em class="sig-param"><span class="pre">host=None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.5.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A Flow contains a collection of Jobs or other Flows to execute.</p>
<p>The <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a> object is the main tool for constructing workflows. Flows
can either contain Jobs or other Flows. Like <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects, Flow objects
can also have outputs, however, these are not explicitly stored in the database.
Instead, the outputs of a Flow act to structure the outputs of the jobs
contained within the Flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jobs</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>Union</em><em>[</em><a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><em>Flow</em></a><em>, </em><em>jobflow.Job</em><em>]</em><em>]</em><em>, </em><em>jobflow.Job</em><em>, </em><a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><em>Flow</em></a><em>]</em>) – The jobs to be run as a list of <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> or <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a> objects.</p></li>
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The output of the flow. These should come from the output of one or more
of the jobs.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The flow name.</p></li>
<li><p><strong>order</strong> (<a class="reference internal" href="#jobflow.core.flow.JobOrder" title="jobflow.core.flow.JobOrder"><em>JobOrder</em></a>) – The order in which the jobs should be exectuted. The default is to determine
the order automatically based on the connections between jobs.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the flow. This is genenrated automatically.</p></li>
<li><p><strong>host</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The identifier of the host flow. This is set automatically when an flow
is included in the jobs array of another flow.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If a job in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array is already part of another flow.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the inputs of all jobs in the <code class="docutils literal notranslate"><span class="pre">jobs</span></code> array are
    missing.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If any jobs needed to resolve the flow <code class="docutils literal notranslate"><span class="pre">output</span></code> are missing.</p></li>
</ul>
</dd>
<dt class="field-odd">Warns</dt>
<dd class="field-odd"><p><strong>UserWarning</strong> – If a <code class="docutils literal notranslate"><span class="pre">.Job</span></code> or <code class="docutils literal notranslate"><span class="pre">Flow</span></code> object is used as the Flow <code class="docutils literal notranslate"><span class="pre">output</span></code> rather
than an <code class="docutils literal notranslate"><span class="pre">OutputReference</span></code>.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-jobflow.core.job" title="jobflow.core.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.JobOrder" title="jobflow.core.flow.JobOrder"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobOrder</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Below we define a simple job to add two numbers, and create an flow containing
two connected add jobs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_first</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_second</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">add_first</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">])</span>
</pre></div>
</div>
<p>This flow does not expose any of the outputs of the jobs contained within it.
We could instead “register” the output of the second add as the output of the
flow.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">],</span> <span class="n">output</span><span class="o">=</span><span class="n">add_second</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>This will allow the flow to be used in another flow. In this way, Flows
can be infinitely nested. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_third</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">flow</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">(</span><span class="n">jobs</span><span class="o">=</span><span class="p">[</span><span class="n">flow</span><span class="p">,</span> <span class="n">add_third</span><span class="p">])</span>
</pre></div>
</div>
<p>Flows can be run using an flow manager. These enable running Flows
locally or on compute clusters (using the FireWorks manager).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow.managers.local</span> <span class="kn">import</span> <span class="n">run_locally</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">run_locally</span><span class="p">(</span><span class="n">flow</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.job_uuids">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">job_uuids</span></code><a class="headerlink" href="#jobflow.core.flow.Flow.job_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p>Uuids of every Job contained in the Flow (including nested Flows).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The uuids of all Jobs in the Flow (including nested Flows).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#list" title="(in Python v3.8)">list</a>[<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.graph">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">graph</span></code><a class="headerlink" href="#jobflow.core.flow.Flow.graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a graph indicating the connectivity of jobs in the flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The graph showing the connectivity of the jobs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DiGraph</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.draw_graph">
<code class="sig-name descname"><span class="pre">draw_graph</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.draw_graph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.draw_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw the flow graph using matplotlib.</p>
<p>Requires matplotlib to be installed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>pyplot</em> – The matplotlib pyplot state.</p></li>
<li><p><em>kwargs</em> – keyword arguments that are passed to <a class="reference internal" href="jobflow.utils.html#jobflow.utils.graph.draw_graph" title="jobflow.utils.graph.draw_graph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">jobflow.utils.graph.draw_graph</span></code></a>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.iterflow">
<code class="sig-name descname"><span class="pre">iterflow</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.iterflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.iterflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate through the jobs of the flow.</p>
<p>The jobs are yielded such that the job output references can always be
resolved. I.e., root nodes of the flow graph are always returned first.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>Job, list[str]</em> – The Job and the uuids of any parent jobs (not to be confused with the host
flow).</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the kwargs of all Jobs in the Flow.</p>
<p>Note that updates will be applied to jobs in nested Flow.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the job name.</p></li>
<li><p><strong>function_filter</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – Only filter matching functions.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflow.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider a flow containing a simple job with a <code class="docutils literal notranslate"><span class="pre">number</span></code> keyword argument.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all jobs in the flow have a kwarg called number. However,
when this is not the case this will result in the bad input kwargs for some
jobs. To only apply the update to the correct jobs, filters can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filter</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">add</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.flow.Flow.update_maker_kwargs">
<code class="sig-name descname"><span class="pre">update_maker_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/flow.html#Flow.update_maker_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.flow.Flow.update_maker_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of any <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects in the jobs.</p>
<p>Note that updates will be applied to Jobs in any inner Flows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Maker</em><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflow.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following flow containing jobs from a Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">add_job</span><span class="p">])</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>This will work if all Makers in the flow have a kwarg called number.
However, when this is not the case this will result in the bad input kwargs
for some Makers. To only apply the update to the correct Makers, filters can be
used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">name_filder</span><span class="o">=</span><span class="s2">"add"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. Consider the following case
for a Maker that produces a job that restarts.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">RestartMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"replace"</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">restart_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">restart_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">RestartMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">my_job</span><span class="p">]</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">RestartMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flow</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
</section>
<section id="module-jobflow.core.job">
<span id="jobflow-core-job"></span><h2>jobflow.core.job<a class="headerlink" href="#module-jobflow.core.job" title="Permalink to this headline">¶</a></h2>
<p>Functions and classes for representing Job objects.</p>
<dl class="py function">
<dt id="jobflow.core.job.job">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">job_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.job" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a function to produce a <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects are delayed function calls that can be used in an
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code>. A job is a composed of the function name and source and any
arguments for the function. This decorator makes it simple to create
job objects directly from a function definition. See the examples for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – A function to wrap. This should not be specified directly and is implied
by the decorator.</p></li>
<li><p><strong>**job_kwargs</strong> – Other keyword arguments that will get passed to the <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> init method.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_message</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">"I am a Job"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span> <span class="o">=</span> <span class="n">print_message</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">print_job</span><span class="p">)</span>
<span class="go">&lt;class 'jobflow.core.job.Job'&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_job</span><span class="o">.</span><span class="n">function</span>
<span class="go">&lt;function print_message at 0x7ff72bdf6af0&gt;</span>
</pre></div>
</div>
<p>Jobs can have required and optional parameters.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">print_sum</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span> <span class="o">=</span> <span class="n">print_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_args</span>
<span class="go">(1, )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print_sum_job</span><span class="o">.</span><span class="n">function_kwargs</span>
<span class="go">{"b": 2}</span>
</pre></div>
</div>
<p>If the function returns a value it can be referenced using the <code class="docutils literal notranslate"><span class="pre">output</span></code>
attribute of the job.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_task</span><span class="o">.</span><span class="n">output</span>
<span class="go">OutputReference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9')</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because the task has not yet been run, the output value is <code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code>
object. References are automatically converted to their computed values
(resolved) when the task runs.</p>
</div>
<p>If a dictionary of values is returned, the values can be indexed in the usual
way.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">"sum"</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"product"</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compute_task</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">"sum"</span><span class="p">]</span>
<span class="go">OutputReference('abeb6f48-9b34-4698-ab69-e4dc2127ebe9', 'sum')</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If an output is indexed incorrectly, for example by trying to access a key that
doesn’t exist, this error will only be raised when the Job is executed.</p>
</div>
<p>Jobs can return <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> objects that control the flow execution flow.
For example, to replace the current jub with another job, <code class="docutils literal notranslate"><span class="pre">replace</span></code> can be used.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">replace</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">new_job</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">new_job</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, job outputs are stored in the :obj`.JobStore` <code class="docutils literal notranslate"><span class="pre">docs_store</span></code>. However,
the <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> <cite>additional_stores`</cite> can also be used for job outputs. The
stores are specified as keyword arguments, where the argument name gives the store
name and the argument value is the type of data/key to store in that store. More
details on the accepted key types are given in the <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> docstring. In the
example below, the “graph” key is stored in an additional store named “graphs” and
the “data” key is stored in an additional store called “large_data”.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span><span class="p">(</span><span class="n">large_data</span><span class="o">=</span><span class="s2">"data"</span><span class="p">,</span> <span class="n">graphs</span><span class="o">=</span><span class="s2">"graph"</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="p">{</span><span class="s2">"large_data"</span><span class="p">:</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"graph"</span><span class="p">:</span> <span class="n">a</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using additional stores requires the <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> to be configured with
the required store names present. See the <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> docstring for more
details.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a></p>
</div>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.Job">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">Job</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uuid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.5.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> is a delayed function call that can be used in an <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a>.</p>
<p>In general, one should not create <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> objects directly but instead use
the <a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator on a function. Any calls to a decorated function will
return an <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> (<em>Callable</em>) – A function. Can be a builtin function such as <code class="docutils literal notranslate"><span class="pre">sum</span></code> or any other function
provided it can be imported. Class and static methods can also be used, provided
the class is importable. Lastly, methods (functions bound to an instance of
class) can be used, provided the class is <code class="xref py py-obj docutils literal notranslate"><span class="pre">MSONable</span></code>.</p></li>
<li><p><strong>function_args</strong> (<em>Tuple</em><em>[</em><em>Any</em><em>, </em><em>..</em><em>]</em>) – The positional arguments to the function call.</p></li>
<li><p><strong>function_kwargs</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The keyword arguments to the function call.</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Schema</em><em>]</em><em>]</em>) – A <code class="xref py py-obj docutils literal notranslate"><span class="pre">Schema</span></code> object that defines the schema of the output.</p></li>
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A unique identifier for the job. Generated automatically.</p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the job (number of times the job has been replaced).</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The name of the job. If not set it will be determined from <code class="docutils literal notranslate"><span class="pre">function</span></code>.</p></li>
<li><p><strong>metadata</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – A dictionary of information that will get stored alongside the job output.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig"><em>JobConfig</em></a>) – The config setting for the job.</p></li>
<li><p><strong>host</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – The UUID of the host flow.</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments that can be used to specify which outputs to save
in additional stores. The argument name gives the additional store name and the
argument value gives the type of data to store in that additional store.
The value can be <code class="docutils literal notranslate"><span class="pre">True</span></code> in which case all outputs are stored in the additional
store, a dictionary key (string or enum), an <code class="xref py py-obj docutils literal notranslate"><span class="pre">MSONable</span></code> class, or a list
of keys/classes.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><p><strong>output</strong> – The output of the job. This is a reference to the future job output and
can be used as the input to other Jobs or Flows.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A job.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job">Job</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Builtin functions such as <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#print" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print</span></code></a> can be specified.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">print_task</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="nb">print</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"I am a job"</span><span class="p">,</span> <span class="p">))</span>
</pre></div>
</div>
<p>Or other functions of the Python standard library.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s2">"folder"</span><span class="p">,</span> <span class="s2">"filename.txt"</span><span class="p">))</span>
</pre></div>
</div>
<p>To use custom functions, the functions should be importable (i.e. not
defined in another function). For example, if the following function is defined
in the <code class="docutils literal notranslate"><span class="pre">my_package</span></code> module.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">Job</span><span class="p">(</span><span class="n">function</span><span class="o">=</span><span class="n">add</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>More details are given in the <a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a> decorator docstring.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.job" title="jobflow.core.job.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
</div>
<dl class="py method">
<dt id="jobflow.core.job.Job.input_references">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_references</span></code><a class="headerlink" href="#jobflow.core.job.Job.input_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Find <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects in the job inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The references in the inputs to the job.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference">OutputReference</a>, ..)</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.input_uuids">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_uuids</span></code><a class="headerlink" href="#jobflow.core.job.Job.input_uuids" title="Permalink to this definition">¶</a></dt>
<dd><p>Uuids of any <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects in the job inputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The UUIDs of the references in the job inputs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, ..)</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.input_references_grouped">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">input_references_grouped</span></code><a class="headerlink" href="#jobflow.core.job.Job.input_references_grouped" title="Permalink to this definition">¶</a></dt>
<dd><p>Group any <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects in the job inputs by their UUIDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The references grouped by their UUIDs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a>, <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>(<a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference">OutputReference</a>, ..)]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.maker">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">maker</span></code><a class="headerlink" href="#jobflow.core.job.Job.maker" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the host <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> object if a job is to run a maker function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A maker object.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker">Maker</a> or <a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.graph">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">graph</span></code><a class="headerlink" href="#jobflow.core.job.Job.graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a graph of the job indicating the inputs to the job.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The graph showing the connectivity of the jobs.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DiGraph</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.set_uuid">
<code class="sig-name descname"><span class="pre">set_uuid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.set_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.set_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the UUID of the job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A UUID.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the job.</p>
<p>If the job has inputs that are <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects, then they will
need to be resolved before the job can run. See the docstring for
<a class="reference internal" href="#jobflow.core.reference.OutputReference.resolve" title="jobflow.core.reference.OutputReference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>store</strong> (<em>jobflow.JobStore</em>) – A <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> to use for resolving references and storing job outputs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The response of the job, containing the outputs, and other settings that
determine the flow execution.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response">Response</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ImportError" title="(in Python v3.8)"><strong>ImportError</strong></a> – If the job function cannot be imported.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a>, <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.resolve_args">
<code class="sig-name descname"><span class="pre">resolve_args</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">store</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.resolve_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.resolve_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve any <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects in the input arguments.</p>
<p>See the docstring for <a class="reference internal" href="#jobflow.core.reference.OutputReference.resolve" title="jobflow.core.reference.OutputReference.resolve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference.resolve()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>jobflow.JobStore</em>) – A maggma store to use for resolving references.</p></li>
<li><p><strong>inplace</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Update the arguments of the current job or return a new job object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A job with the references resolved.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job">Job</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the kwargs of the jobs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the job name.</p></li>
<li><p><strong>function_filter</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>]</em>) – Only filter matching functions.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflow.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider a flow containing a simple job with a <code class="docutils literal notranslate"><span class="pre">number</span></code> keyword argument.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@job</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument can be updated using.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.update_maker_kwargs">
<code class="sig-name descname"><span class="pre">update_maker_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.update_maker_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.update_maker_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of any <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects in the job source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Maker</em><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflow.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following job from a Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated in the following ways.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. Consider the following case
for a Maker that produces a job that replaces itself with another job.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">ReplacementMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"replace"</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">add_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">add_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">ReplacementMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">RestartMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_job</span><span class="o">.</span><span class="n">update_maker_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.job.Job.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Job.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Job.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the job as a dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.Response">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">Response</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stored_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_children</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_jobflow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Response"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.8/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> contains the output, detours, and stop commands of a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The job output.</p></li>
<li><p><strong>detour</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>, </em><em>List</em><em>[</em><em>jobflow.Flow</em><em>]</em><em>]</em><em>]</em>) – A flow or job to detour to.</p></li>
<li><p><strong>addition</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>, </em><em>List</em><em>[</em><em>jobflow.Flow</em><em>]</em><em>]</em><em>]</em>) – A flow or job to add to the current flow.</p></li>
<li><p><strong>replace</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>jobflow.Flow</em><em>, </em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>, </em><em>List</em><em>[</em><a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><em>Job</em></a><em>]</em><em>, </em><em>List</em><em>[</em><em>jobflow.Flow</em><em>]</em><em>]</em><em>]</em>) – A flow or job to replace the current job.</p></li>
<li><p><strong>stored_data</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Hashable</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Data to be stored by the flow manager.</p></li>
<li><p><strong>stop_children</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop any children of the current flow.</p></li>
<li><p><strong>stop_jobflow</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Stop executing all remaining jobs.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<dl class="py method">
<dt id="jobflow.core.job.Response.from_job_returns">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_job_returns</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_returns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#Response.from_job_returns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.Response.from_job_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> from the outputs of a <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>job_returns</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – The outputs of a job. If this is a <a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> object, the output schema
will be applied to the response outputs and the response returned.
Otherwise, the <code class="docutils literal notranslate"><span class="pre">job_returns</span></code> will be put into the <code class="docutils literal notranslate"><span class="pre">outputs</span></code> of a new
<a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Response</span></code></a> object.</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><em>jobflow.Schema</em><em>]</em><em>]</em>) – The outputs class associated with the job. Used to enforce a schema for the
outputs.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the job outputs do not match the output schema.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The job response controlling the data to store and flow execution options.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#jobflow.core.job.Response" title="jobflow.core.job.Response">Response</a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.job.JobConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">JobConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">resolve_references=True</span></em>, <em class="sig-param"><span class="pre">on_missing_references=&lt;OnMissing.ERROR:</span> <span class="pre">'error'&gt;</span></em>, <em class="sig-param"><span class="pre">manager_config=&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">expose_store=False</span></em>, <em class="sig-param"><span class="pre">pass_manager_config=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#JobConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.JobConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.5.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>The configuration parameters for a job.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resolve_references</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to resolve any references before the job function is executed.
If <code class="docutils literal notranslate"><span class="pre">False</span></code> the unresolved reference objects will be passed into the function
call.</p></li>
<li><p><strong>on_missing_references</strong> (<a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><em>jobflow.core.reference.OnMissing</em></a>) – What to do if the references cannot be resolved. The default is to throw an
error.</p></li>
<li><p><strong>manager_config</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – The configuration settings to control the manager execution.</p></li>
<li><p><strong>expose_store</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to expose the store in <code class="xref py py-obj docutils literal notranslate"><span class="pre">CURRENT_JOB`</span></code> when the job is running.</p></li>
<li><p><strong>pass_manager_config</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to pass the manager configuration on to detour, addition, and
replacement jobs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobConfig</span></code></a> object.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.job.JobConfig" title="jobflow.core.job.JobConfig">JobConfig</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.job.store_inputs">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.job.</span></code><code class="sig-name descname"><span class="pre">store_inputs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/job.html#store_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.job.store_inputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Job to store inputs.</p>
<p>Note that any <code class="xref py py-obj docutils literal notranslate"><span class="pre">Reference</span></code> objects will not be resolved, however, missing
references will be replaced with <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inputs</strong> (<em>Any</em>) – The inputs to store.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.maker">
<span id="jobflow-core-maker"></span><h2>jobflow.core.maker<a class="headerlink" href="#module-jobflow.core.maker" title="Permalink to this headline">¶</a></h2>
<p>Define base Maker class for creating jobs and flows.</p>
<dl class="py class">
<dt id="jobflow.core.maker.Maker">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.maker.</span></code><code class="sig-name descname"><span class="pre">Maker</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Maker'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.5.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>Base maker (factory) class for constructing <code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code> objects.</p>
<p>Note, this class is only an abstract implementation. To create a functioning Maker
subclass <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> and define the <code class="docutils literal notranslate"><span class="pre">make</span></code> method. See examples below.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name of jobs or flows created from this maker.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#module-jobflow.core.job" title="jobflow.core.job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">job</span></code></a>, <a class="reference internal" href="#jobflow.core.job.Job" title="jobflow.core.job.Job"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code></a>, <a class="reference internal" href="#jobflow.core.flow.Flow" title="jobflow.core.flow.Flow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Below we define a simple maker that generates a job to add two numbers. Next, we
make a job using the maker.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Maker</span><span class="p">,</span> <span class="n">job</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span><span class="o">.</span><span class="n">name</span>
<span class="go">"add"</span>
</pre></div>
</div>
<p>There are two key features of <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a> objects that make them extremely
powerful. The first is the ability to have class instance variables that
are used inside the make function. For example, running the job below will produce
the output <code class="docutils literal notranslate"><span class="pre">6.5</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"add"</span>
<span class="gp">... </span>    <span class="n">c</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mf">3.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Jobs created by a Maker will inherit a copy of the Maker object. This means that
if 1) a job is created, 2) the maker variables are changed, and 3) a new job is
created, only the second job will reflect the updated maker variables.</p>
</div>
<p>The second useful feature is the ability for delayed creation of jobs. For example,
consider a job that creates another job during its execution. If the new job
has lots of optional arguments, this will require passing lots of arguments to the
first job. However, using a Maker, the kwargs of the job can be specified as maker
kwargs and specified when the first job is created, making it much cleaner to
customise the newly created job. For example, consider this job that first squares
two numbers, then creates a new job to add them.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">SquareThenAddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">a_squared</span> <span class="o">=</span> <span class="n">a</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">... </span>        <span class="n">b_squared</span> <span class="o">=</span> <span class="n">b</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">... </span>        <span class="n">add_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a_squared</span><span class="p">,</span> <span class="n">b_squared</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">detour</span><span class="o">=</span><span class="n">add_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">SquareThenAddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square_add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The add job can be customised by specifying a custom <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> instance when
the <code class="docutils literal notranslate"><span class="pre">SquareThenAddMaker</span></code> is initialized.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">custom_add_maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">SquareThenAddMaker</span><span class="p">(</span><span class="n">add_maker</span><span class="o">=</span><span class="n">custom_add_maker</span><span class="p">)</span>
</pre></div>
</div>
<p>This provides a very natural way to contain and control the kwargs for dynamically
created jobs.</p>
<p>Note that makers can also be used to create <code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code> objects. In this case,
the only difference is that the <code class="docutils literal notranslate"><span class="pre">make()</span></code> method is not decorated using the <code class="docutils literal notranslate"><span class="pre">job</span></code>
decorator and the function should return a flow. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Flow</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">DoubleAddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">add_first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">add_second</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">add_first</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Flow</span><span class="p">([</span><span class="n">add_first</span><span class="p">,</span> <span class="n">add_second</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">DoubleAddMaker</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">double_add_job</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt id="jobflow.core.maker.Maker.name">
<code class="sig-name descname"><span class="pre">name</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><span class="pre">str</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">'Maker'</span></em><a class="headerlink" href="#jobflow.core.maker.Maker.name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="jobflow.core.maker.Maker.make">
<code class="sig-name descname"><span class="pre">make</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker.make"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker.make" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a job or a flow - must be overridden with a concrete implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[jobflow.Flow, jobflow.Job]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.maker.Maker.update_kwargs">
<code class="sig-name descname"><span class="pre">update_kwargs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nested</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_mod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/maker.html#Maker.update_kwargs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.maker.Maker.update_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the keyword arguments of the <a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Maker</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note, the maker is not updated in place. Instead a new maker object is
returned.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>update</strong> (<em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em>) – The updates to apply.</p></li>
<li><p><strong>name_filter</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – A filter for the Maker name.</p></li>
<li><p><strong>class_filter</strong> (<em>Optional</em><em>[</em><em>Type</em><em>[</em><a class="reference internal" href="#jobflow.core.maker.Maker" title="jobflow.core.maker.Maker"><em>Maker</em></a><em>]</em><em>]</em>) – A filter for the maker class. Note the class filter will match any
subclasses.</p></li>
<li><p><strong>nested</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to apply the updates to Maker objects that are themselves kwargs
of a Maker object. See examples for more details.</p></li>
<li><p><strong>dict_mod</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Use the dict mod language to apply updates. See <a class="reference internal" href="jobflow.utils.html#jobflow.utils.dict_mods.DictMods" title="jobflow.utils.dict_mods.DictMods"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DictMods</span></code></a> for more
details.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Consider the following Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">job</span><span class="p">,</span> <span class="n">Maker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">AddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">number</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">number</span></code> argument could be updated using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>By default, the updates are applied to nested Makers. These are Makers
which are present in the kwargs of another Maker. For example, consider this
maker that first squares a number, then creates a new job to add it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">SquareThenAddMaker</span><span class="p">(</span><span class="n">Maker</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">add_maker</span><span class="p">:</span> <span class="n">Maker</span> <span class="o">=</span> <span class="n">AddMaker</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="nd">@job</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">a_squared</span> <span class="o">=</span> <span class="n">a</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">... </span>        <span class="n">add_job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_maker</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">a_squared</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">detour</span><span class="o">=</span><span class="n">add_job</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">SquareThenAddMaker</span><span class="p">()</span>
</pre></div>
</div>
<p>The following update will apply to the nested <code class="docutils literal notranslate"><span class="pre">AddMaker</span></code> in the kwargs of the
<code class="docutils literal notranslate"><span class="pre">SquareThenAddMaker</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">({</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if <code class="docutils literal notranslate"><span class="pre">nested=False</span></code>, then the update will not be applied to the nested
Maker:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">maker</span> <span class="o">=</span> <span class="n">maker</span><span class="o">.</span><span class="n">update_kwargs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s2">"number"</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="n">function_filter</span><span class="o">=</span><span class="n">AddMaker</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</dd></dl>
</section>
<section id="module-jobflow.core.reference">
<span id="jobflow-core-reference"></span><h2>jobflow.core.reference<a class="headerlink" href="#module-jobflow.core.reference" title="Permalink to this headline">¶</a></h2>
<p>Define classes for handling job outputs.</p>
<dl class="py class">
<dt id="jobflow.core.reference.OnMissing">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">OnMissing</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#OnMissing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.OnMissing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="jobflow.utils.html#jobflow.utils.enum.ValueEnum" title="jobflow.utils.enum.ValueEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.utils.enum.ValueEnum</span></code></a></p>
<p>What to do when a reference cannot be resolved.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ERROR</span></code>: Throw an error.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code>: Replace the missing reference with <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PASS</span></code>: Pass the unresolved <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> object on.</p></li>
</ul>
<dl class="py attribute">
<dt id="jobflow.core.reference.OnMissing.ERROR">
<code class="sig-name descname"><span class="pre">ERROR</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'error'</span></em><a class="headerlink" href="#jobflow.core.reference.OnMissing.ERROR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.OnMissing.NONE">
<code class="sig-name descname"><span class="pre">NONE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'none'</span></em><a class="headerlink" href="#jobflow.core.reference.OnMissing.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="jobflow.core.reference.OnMissing.PASS">
<code class="sig-name descname"><span class="pre">PASS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'pass'</span></em><a class="headerlink" href="#jobflow.core.reference.OnMissing.PASS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt id="jobflow.core.reference.OutputReference">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">OutputReference</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attributes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_schema</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#OutputReference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.OutputReference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://guide.materialsvirtuallab.org/monty/monty.json.html#monty.json.MSONable" title="(in monty v2021.5.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></a></p>
<p>A reference to the output of a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code>.</p>
<p>The output may or may not exist yet. Accordingly, <a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code></a> objects
are essentially pointers to future job outputs. Output references can be used as
input to a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Job</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Flow</span></code> and will be “resolved”. This means, the value
of the reference will be looked up in the job store and the value passed on to the
job.</p>
<p>Output references are also how jobflow is able to determine the dependencies between
jobs, allowing for construction of the job graph and to determine the job execution
order.</p>
<p>Upon attribute access or indexing, an output reference will return another
output reference with the attribute accesses stored. When resolving the reference,
the attributes/indexing will be also be performed before the value is passed on to
the job. See the examples for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The job uuid to which the output belongs.</p></li>
<li><p><strong>attributes</strong> (<em>Tuple</em><em>[</em><em>Tuple</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>, </em><em>..</em><em>]</em>) – A tuple of attributes or indexes that have been performed on the
output. Attributes are specified by a tuple of <code class="docutils literal notranslate"><span class="pre">("a",</span> <span class="pre">attr)</span></code>, whereas
indexes are specified as a tuple of <code class="docutils literal notranslate"><span class="pre">("i",</span> <span class="pre">index)</span></code>.</p></li>
<li><p><strong>output_schema</strong> (<em>Optional</em><em>[</em><em>Any</em><em>]</em>) – An output schema for the output that will be used to validate any attribute
accesses or indexes. Note, schemas can only be used to validate the first
attribute/index access.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>A reference can be constructed using just the job uuid.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">OutputReference</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span> <span class="o">=</span> <span class="n">OutputReference</span><span class="p">(</span><span class="s2">"1234"</span><span class="p">)</span>
</pre></div>
</div>
<p>Attribute accesses return new references.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span><span class="o">.</span><span class="n">my_attribute</span>
<span class="go">OutputReference(1234, .my_attribute)</span>
</pre></div>
</div>
<p>Attribute accesses and indexing can be chained.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ref</span><span class="p">[</span><span class="s2">"key"</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<span class="go">OutputReference(1234, ['key'], [0], .value)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="jobflow.core.reference.OutputReference.resolve">
<code class="sig-name descname"><span class="pre">resolve</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">store=None</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;OnMissing.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#OutputReference.resolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.OutputReference.resolve" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve the reference.</p>
<p>This function will query the job store for the reference value and perform any
attribute accesses/indexing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>store</strong> (<em>Optional</em><em>[</em><em>jobflow.JobStore</em><em>]</em>) – A job store.</p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em>) – A dictionary cache to use for local caching of reference values.</p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><em>OnMissing</em></a>) – What to do if the output reference is missing in the database and cache.
See <a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OnMissing</span></code></a> for the available options.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – If the reference cannot be found and <code class="docutils literal notranslate"><span class="pre">on_missing</span></code> is set to
    <code class="docutils literal notranslate"><span class="pre">OnMissing.ERROR</span></code> (default).</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The resolved reference if it can be found. If the reference cannot be found,
the returned value will depend on the value of <code class="docutils literal notranslate"><span class="pre">on_missing</span></code>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.OutputReference.set_uuid">
<code class="sig-name descname"><span class="pre">set_uuid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#OutputReference.set_uuid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.OutputReference.set_uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the UUID of the reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A new UUID.</p></li>
<li><p><strong>inplace</strong> – Whether to update the current reference object or return a completely new
object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An output reference with the specified uuid.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference">OutputReference</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.OutputReference.attributes_formatted">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">attributes_formatted</span></code><a class="headerlink" href="#jobflow.core.reference.OutputReference.attributes_formatted" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a formatted description of the attributes.</p>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.reference.OutputReference.as_dict">
<code class="sig-name descname"><span class="pre">as_dict</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#OutputReference.as_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.OutputReference.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the reference as a dict.</p>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.resolve_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">resolve_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">references</span></em>, <em class="sig-param"><span class="pre">store=None</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;OnMissing.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#resolve_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve multiple output references.</p>
<p>Uses caching to minimize number of database queries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>references</strong> (<em>Sequence</em><em>[</em><a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference"><em>OutputReference</em></a><em>]</em>) – A list or tuple of output references.</p></li>
<li><p><strong>store</strong> (<em>Optional</em><em>[</em><em>jobflow.JobStore</em><em>]</em>) – A job store.</p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em>) – A dictionary cache to use for local caching of reference values.</p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><em>OnMissing</em></a>) – What to do if the output reference is missing in the database and cache.
See <a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OnMissing</span></code></a> for the available options.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The output values as a dictionary mapping of <code class="docutils literal notranslate"><span class="pre">{reference:</span> <span class="pre">output}</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>[<a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference">OutputReference</a>, Any]</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.find_and_resolve_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">find_and_resolve_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">arg</span></em>, <em class="sig-param"><span class="pre">store=None</span></em>, <em class="sig-param"><span class="pre">cache=None</span></em>, <em class="sig-param"><span class="pre">on_missing=&lt;OnMissing.ERROR:</span> <span class="pre">'error'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#find_and_resolve_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.find_and_resolve_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the input but with all output references replaced with their resolved values.</p>
<p>This function works on nested inputs. For example, lists or dictionaries
(or combinations of list and dictionaries) that contain output references.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>Any</em>) – The input argument containing output references.</p></li>
<li><p><strong>store</strong> (<em>Optional</em><em>[</em><em>jobflow.JobStore</em><em>]</em>) – A job store.</p></li>
<li><p><strong>cache</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Any</em><em>]</em><em>]</em>) – A dictionary cache to use for local caching of reference values.</p></li>
<li><p><strong>on_missing</strong> (<a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><em>OnMissing</em></a>) – What to do if the output reference is missing in the database and cache.
See <a class="reference internal" href="#jobflow.core.reference.OnMissing" title="jobflow.core.reference.OnMissing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OnMissing</span></code></a> for the available options.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input argument but with all output references replaced with their resolved
values. If a reference cannot be found, its replacement value will depend on the
value of <code class="docutils literal notranslate"><span class="pre">on_missing</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt id="jobflow.core.reference.find_and_get_references">
<code class="sig-prename descclassname"><span class="pre">jobflow.core.reference.</span></code><code class="sig-name descname"><span class="pre">find_and_get_references</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/reference.html#find_and_get_references"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.reference.find_and_get_references" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and extract output references.</p>
<p>This function works on nested inputs. For example, lists or dictionaries
(or combinations of list and dictionaries) that contain output references.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>arg</strong> (<em>Any</em>) – The argument to search for references.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The output references as a tuple.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>[<a class="reference internal" href="#jobflow.core.reference.OutputReference" title="jobflow.core.reference.OutputReference">OutputReference</a>]</p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.schema">
<span id="jobflow-core-schema"></span><h2>jobflow.core.schema<a class="headerlink" href="#module-jobflow.core.schema" title="Permalink to this headline">¶</a></h2>
<p>Define job output schema class.</p>
<dl class="py class">
<dt id="jobflow.core.schema.Schema">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.schema.</span></code><code class="sig-name descname"><span class="pre">Schema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">extra_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/schema.html#Schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.schema.Schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">jobflow.core.schema._BaseSchema</span></code></p>
<p>Base Schema class for representing job output schemas.</p>
<p>This is a special pydantic model that automatically converts all types to support
<code class="xref py py-obj docutils literal notranslate"><span class="pre">OutputReference</span></code> objects.</p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises ValidationError if the input data cannot be parsed to form a valid model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra_data</strong> (<em>Any</em>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
</section>
<section id="module-jobflow.core.state">
<span id="jobflow-core-state"></span><h2>jobflow.core.state<a class="headerlink" href="#module-jobflow.core.state" title="Permalink to this headline">¶</a></h2>
<p>Stateful interface for accessing the current job (and store).</p>
<p>This module defines the <code class="docutils literal notranslate"><span class="pre">CURRENT_JOB</span></code> object which has two attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">job</span></code>: Containing the current job.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">store</span></code>: Containing the current store. Only available if <code class="docutils literal notranslate"><span class="pre">expose_store</span></code> is set in
the job config.</p></li>
</ul>
</section>
<section id="module-jobflow.core.store">
<span id="jobflow-core-store"></span><h2>jobflow.core.store<a class="headerlink" href="#module-jobflow.core.store" title="Permalink to this headline">¶</a></h2>
<p>Define the primary jobflow database interface.</p>
<dl class="py class">
<dt id="jobflow.core.store.JobStore">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">jobflow.core.store.</span></code><code class="sig-name descname"><span class="pre">JobStore</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs_store</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_stores</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">maggma.core.store.Store</span></code></p>
<p>Store intended to allow pushing and pulling documents into multiple stores.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>docs_store</strong> (<em>Store</em>) – Store for basic documents.</p></li>
<li><p><strong>additional_stores</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Store</em><em>]</em><em>]</em>) – Additional stores to use for storing large data/specific objects. Given as a
mapping of <code class="docutils literal notranslate"><span class="pre">{store</span> <span class="pre">name:</span> <span class="pre">store}</span></code> where store is a maggma <code class="xref py py-obj docutils literal notranslate"><span class="pre">Store</span></code> object.</p></li>
<li><p><strong>save</strong> (<em>save_type</em>) – Which items to save in additional stores when uploading documents. Given as a
mapping of <code class="docutils literal notranslate"><span class="pre">{store</span> <span class="pre">name:</span> <span class="pre">store_type}</span></code> where <code class="docutils literal notranslate"><span class="pre">store_type</span></code> can be a dictionary
key (string or enum), an <code class="xref py py-obj docutils literal notranslate"><span class="pre">MSONable</span></code> class, or a list of keys/classes.</p></li>
<li><p><strong>load</strong> (<em>load_type</em>) – Which items to load from additional stores when querying documents. Given as a
mapping of <code class="docutils literal notranslate"><span class="pre">{store</span> <span class="pre">name:</span> <span class="pre">store_type}</span></code> where <code class="docutils literal notranslate"><span class="pre">store_type</span></code> can be <cite>True`</cite>, in
which case all saved items are loaded, a dictionary key (string or enum),
an <code class="xref py py-obj docutils literal notranslate"><span class="pre">MSONable</span></code> class, or a list of keys/classes. Alternatively,
<code class="docutils literal notranslate"><span class="pre">load=True</span></code> will automatically load all items from every additional store.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.name">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">name</span></code><a class="headerlink" href="#jobflow.core.store.JobStore.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of the data source.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string representing this data source.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.connect">
<code class="sig-name descname"><span class="pre">connect</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force_reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the source data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>force_reset</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to reset the connection or not.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.close">
<code class="sig-name descname"><span class="pre">close</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close any connections.</p>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.count">
<code class="sig-name descname"><span class="pre">count</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of documents matching the query criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to count in.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of documents matching the query.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.query">
<code class="sig-name descname"><span class="pre">query</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the JobStore for documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search in.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in grouped documents.</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of documents to skip.</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limit on the total number of documents returned.</p></li>
<li><p><strong>load</strong> (<em>load_type</em>) – Which items to load from additional stores. See <code class="docutils literal notranslate"><span class="pre">JobStore</span></code> constructor for
more details.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>Dict</em> – The documents.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Dict]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.query_one">
<code class="sig-name descname"><span class="pre">query_one</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.query_one"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.query_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the Store for a single document.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in the document.</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>load</strong> (<em>load_type</em>) – Which items to load from additional stores. See <code class="docutils literal notranslate"><span class="pre">JobStore</span></code> constructor for
more details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The document.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a> or <a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.update">
<code class="sig-name descname"><span class="pre">update</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update or insert documents into the Store.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>docs</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>Dict</em><em>]</em>) – The document or list of documents to update.</p></li>
<li><p><strong>key</strong> (<em>Union</em><em>[</em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Field name(s) to determine uniqueness for a document, can be a list of
multiple fields, a single field, or None if the Store’s key field is to
be used.</p></li>
<li><p><strong>save</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em>, </em><em>save_type</em><em>]</em>) – Which items to save in additional stores. See <code class="docutils literal notranslate"><span class="pre">JobStore</span></code> constructor for
more details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.ensure_index">
<code class="sig-name descname"><span class="pre">ensure_index</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.ensure_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.ensure_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to create an index on document store and return True success.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Single key to index.</p></li>
<li><p><strong>unique</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether or not this index contains only unique keys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the index exists/was created correctly.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#bool" title="(in Python v3.8)">bool</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.groupby">
<code class="sig-name descname"><span class="pre">groupby</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">criteria</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">properties</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.groupby"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Group documents by keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>Union</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – Fields to group documents.</p></li>
<li><p><strong>criteria</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>]</em>) – PyMongo filter for documents to search in.</p></li>
<li><p><strong>properties</strong> (<em>Union</em><em>[</em><em>Dict</em><em>, </em><em>List</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>]</em>) – Properties to return in grouped documents</p></li>
<li><p><strong>sort</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Union</em><em>[</em><em>Sort</em><em>, </em><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>]</em><em>]</em><em>]</em>) – Dictionary of sort order for fields. Keys are field names and values are 1
for ascending or -1 for descending.</p></li>
<li><p><strong>skip</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of documents to skip.</p></li>
<li><p><strong>limit</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limit on the total number of documents returned.</p></li>
<li><p><strong>load</strong> (<em>load_type</em>) – Which items to load from additional stores. See <code class="docutils literal notranslate"><span class="pre">JobStore</span></code> constructor for
more details.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>dict, list[dict]</em> – The documents as (key, documents) grouped by their keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[Tuple[Dict, List[Dict]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.remove_docs">
<code class="sig-name descname"><span class="pre">remove_docs</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.remove_docs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.remove_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove docs matching the criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<em>Dict</em>) – Criteria for documents to remove.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.collection">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">collection</span></code><a class="headerlink" href="#jobflow.core.store.JobStore.collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the collection name.</p>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.get_output">
<code class="sig-name descname"><span class="pre">get_output</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.get_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.get_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the output from of a job UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uuid</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A job UUID.</p></li>
<li><p><strong>which</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – If there are multiple job runs, which index to use. Options are:
- <cite>“last”</cite> (default): Use the last job that ran.
- <cite>“first”</cite>: Use the first job that ran.
- <cite>“all”</cite>: Return all outputs, sorted with the lowest index first.</p></li>
<li><p><strong>load</strong> (<em>load_type</em>) – Which items to load from additional stores. Setting to <code class="docutils literal notranslate"><span class="pre">True</span></code> will load
all items stored in additional stores. See the <code class="docutils literal notranslate"><span class="pre">JobStore</span></code> constructor for
more details.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The output(s) for the job UUID.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="jobflow.core.store.JobStore.from_file">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">from_file</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_file</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/jobflow/core/store.html#JobStore.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#jobflow.core.store.JobStore.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an JobStore from a database file.</p>
<p>Two options are supported for the database file. The file should be in json or
yaml format.</p>
<p>The simplest format is a monty dumped version of the store, generated using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">monty.serialization</span> <span class="kn">import</span> <span class="n">dumpfn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dumpfn</span><span class="p">(</span><span class="s2">"job_store.json"</span><span class="p">,</span> <span class="n">job_store</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, the file can contain the keys docs_store, additional_stores and
any other keyword arguments supported by the <a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> constructor. The
docs_store and additional stores are specified by the <code class="docutils literal notranslate"><span class="pre">type</span></code> key which must
match a Maggma <code class="docutils literal notranslate"><span class="pre">Store</span></code> subclass, and the remaining keys are passed to
the store constructor. For example, the following file would  create a
<a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JobStore</span></code></a> with a <code class="docutils literal notranslate"><span class="pre">MongoStore</span></code> for docs and a <code class="docutils literal notranslate"><span class="pre">GridFSStore</span></code> as an
additional store for data.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">docs_store</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MongoStore</span>
  <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jobflow_unittest</span>
  <span class="nt">collection_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputs</span>
  <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
  <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">27017</span>
<span class="nt">additional_stores</span><span class="p">:</span>
  <span class="nt">data</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GridFSStore</span>
    <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jobflow_unittest</span>
    <span class="nt">collection_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputs_blobs</span>
    <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
    <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">27017</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db_file</strong> (<em>Union</em><em>[</em><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><em>Path</em><em>]</em>) – Path to the file containing the credentials.</p></li>
<li><p><strong>**kwargs</strong> – Additional keyword arguments that get passed to the JobStore constructor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A JobStore.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#jobflow.core.store.JobStore" title="jobflow.core.store.JobStore">JobStore</a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="jobflow.managers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">jobflow.managers</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="jobflow.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">jobflow</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, hackingmaterials
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">jobflow.core</a><ul>
<li><a class="reference internal" href="#module-jobflow.core.flow">jobflow.core.flow</a></li>
<li><a class="reference internal" href="#module-jobflow.core.job">jobflow.core.job</a></li>
<li><a class="reference internal" href="#module-jobflow.core.maker">jobflow.core.maker</a></li>
<li><a class="reference internal" href="#module-jobflow.core.reference">jobflow.core.reference</a></li>
<li><a class="reference internal" href="#module-jobflow.core.schema">jobflow.core.schema</a></li>
<li><a class="reference internal" href="#module-jobflow.core.state">jobflow.core.state</a></li>
<li><a class="reference internal" href="#module-jobflow.core.store">jobflow.core.store</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>